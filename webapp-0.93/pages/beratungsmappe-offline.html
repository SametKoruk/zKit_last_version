<!-- @structr:grant(admin,arwd), @structr:content(text/html) --><structr:template src="Main Page Template" data-structr-meta-name="Main Page Template">
	<!-- @structr:grant(admin,arwd) -->
	<div>
		<!-- @structr:grant(admin,arwd) -->
		<div class="row">
			<!-- @structr:grant(admin,arwd) -->
			<div class="col-sm-12">
				<!-- @structr:grant(admin,arwd) -->
				<div class="form-group"><!-- @structr:grant(admin,arwd) --><a class="btn btn-default pull-left" href="/vorlagen"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Zurück zur Übersicht</a></div>
			</div>
		</div>
		<!-- @structr:grant(admin,arwd) -->
		<hr>
		<!-- @structr:grant(admin,arwd) -->
		<form id="client-form" action="javascript:void(0)">
			<!-- @structr:grant(admin,arwd) -->
			<div class="row">
				<!-- @structr:grant(admin,arwd) -->
				<div class="col-sm-6">
					<!-- @structr:grant(admin,arwd) -->
					<div class="form-group">
						<!-- @structr:grant(admin,arwd) -->
						<label><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Name der Beratungsmappe</label>
						<!-- @structr:owner(admin), @structr:grant(admin,arwd) -->
						<div class="input-group">
							<!-- @structr:owner(admin), @structr:grant(admin,arwd) -->
							<input class="form-control" required="required" type="text" value="${current.name}" data-structr-name="name"><!-- @structr:owner(admin), @structr:grant(admin,arwd) --><span class="input-group-btn">
								<!-- @structr:grant(admin,arwd) -->
								<button class="btn btn-default" data-structr-action="save:ConsultingFolder" data-structr-append-id="false" data-structr-attributes="name" data-structr-id="${current.id}" data-structr-reload="true" data-structr-meta-hide-conditions="empty(current)"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Speichern</button>
							</span>
						</div>
					</div>
				</div>
				<!-- @structr:grant(admin,arwd) -->
				<div class="col-sm-6">
					<!-- @structr:owner(admin), @structr:grant(admin,arwd) -->
					<div class="form-group">
						<!-- @structr:grant(admin,arwd) -->
						<label><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Beratungen</label><!-- @structr:grant(admin,arwd) --><a class="btn btn-default" href="javascript:void(0)" data-target="#modal-new-consultation" data-toggle="modal"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Neue Beratung</a>
					</div>
					<!-- @structr:grant(admin,arwd) -->
					<div class="table-responsive">
						<!-- @structr:grant(admin,arwd) -->
						<table class="table" data-structr-meta-hide-conditions="eq(size(current.client.consultations), 0)">
							<!-- @structr:grant(admin,arwd) -->
							<thead>
								<!-- @structr:grant(admin,arwd) -->
								<tr>
									<!-- @structr:grant(admin,arwd) -->
									<th><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Datum</th>
									<!-- @structr:grant(admin,arwd) -->
									<th><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Bemerkungen</th>
									<!-- @structr:grant(admin,arwd) -->
									<th></th>
								</tr>
							</thead>
							<!-- @structr:grant(admin,arwd) -->
							<tbody>
								<!-- @structr:grant(admin,arwd) -->
								<tr data-structr-id="${consultation.id}" data-structr-meta-data-key="consultation" data-structr-meta-function-query="current.client.consultations">
									<!-- @structr:grant(admin,arwd) -->
									<td data-structr-attr="date" data-structr-edit-class="form-control" data-structr-format="dd.mm.yy" data-structr-type="Date"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->${date_format(consultation.date, 'dd.MM.yyyy')}</td>
									<!-- @structr:grant(admin,arwd) -->
									<td data-structr-attr="comments" data-structr-edit-class="form-control"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->${consultation.comments}</td>
									<!-- @structr:owner(admin), @structr:grant(admin,arwd) -->
									<td><!-- @structr:grant(admin,arwd) --><a class="btn" href="javascript:void(0)" data-structr-action="edit:Consultation" data-structr-attributes="date, comments" data-structr-edit-class="btn btn-xs" data-structr-id="${consultation.id}" data-structr-reload="true"><!-- @structr:grant(admin,arwd) --><i class="fa fa-edit"></i></a><!-- @structr:grant(admin,arwd) --><a class="btn" href="javascript:void(0)" data-structr-action="delete:Consultation" data-structr-confirm="true" data-structr-id="${consultation.id}" data-structr-reload="true"><!-- @structr:grant(admin,arwd) --><i class="fa fa-trash"></i></a></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</form>
		<!-- @structr:grant(admin,arwd) -->
		<hr>
		<!-- @structr:grant(admin,arwd) -->
		<structr:component src="169025b19983404fb098932a800e8b5f">
		</structr:component>
		<!-- @structr:grant(admin,arwd) -->
		<hr>
		<!-- @structr:grant(admin,arwd) -->
		<structr:component src="b7b9db89dca3452bae1afb9dc9367b32">
		</structr:component>
		<!-- @structr:grant(admin,arwd) -->
		<hr>
		<!-- @structr:grant(admin,arwd) -->
		<div class="row">
			<!-- @structr:grant(admin,arwd) -->
			<div class="col-sm-4">
				<!-- @structr:grant(admin,arwd) -->
				<button class="btn btn-danger" data-structr-action="delete:ConsultingFolderTemplate" data-structr-confirm="true" data-structr-hide="edit" data-structr-id="${current.id}" data-structr-reload="true" data-structr-return="/vorlagen"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Beratungsmappe "${current.name}" löschen</button>
			</div>
			<!-- @structr:grant(admin,arwd) -->
			<div class="col-sm-8">
				<!-- @structr:grant(admin,arwd) -->
				<button class="btn btn-default disabled read-only online-only" id="new-template-from-folder" disabled="disabled"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Vorlage aus Beratungsmappe erstellen</button>
				<!-- @structr:grant(admin,arwd) -->
				<script type="text/javascript"><!-- @structr:grant(admin,arwd), @structr:content(text/javascript) -->$(function() {
	
	$('#new-template-from-folder').on('click', function() {
		console.log('TODO');return;
	
		$.post( "/structr/rest/ConsultingFolderTemplate/${current.id}/createConsultingFolderFromTemplate", { params: {} }, function( data ) {
			
			if(data.result != "undefined"){
				window.location.href="/beratungsmappe/"+data.result.id;
			} else {
				console.log(data);	
			}
			
		});
		
	});
	
});</script><!-- @structr:grant(admin,arwd) --><a class="btn btn-default m-l-1 online-only" href="/vorlagen"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Vorlagen</a><!-- @structr:grant(admin,arwd) --><a class="btn btn-default m-l-1" href="/vermittler/${me.id}"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Vermittlerprofil</a><!-- @structr:grant(admin,arwd) --><a class="btn btn-default m-l-1" href="/dateiarchiv"><!-- @structr:grant(admin,arwd), @structr:content(text/plain) -->Dateien</a>
			</div>
		</div>
		<!-- @structr:owner(admin), @structr:grant(admin,arwd) -->
		<structr:component src="SectionCreateModal" data-structr-meta-name="SectionCreateModal">
		</structr:component>
		<!-- @structr:owner(admin), @structr:grant(admin,arwd), @structr:content(text/plain) --><structr:template src="e010ca5cb9a64035bc631f29dbb70539">
		</structr:template>
	
		<!-- @structr:owner(admin), @structr:grant(admin,arwd) -->
		<structr:component src="ConsultationCreateModal" data-structr-meta-name="ConsultationCreateModal">
		</structr:component>
	</div>
</structr:template>
